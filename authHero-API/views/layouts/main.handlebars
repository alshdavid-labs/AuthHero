<script src="https://code.jquery.com/jquery-3.0.0.min.js" integrity="sha256-JmvOoLtYsmqlsWxa7mDSLMwa6dZ9rrIdtrrVYRnDRH0=" crossorigin="anonymous"></script>


<!-- Admin Login /  Registration -->
<div>
    <a href="#gui"><div style="position: fixed; top: 10px; right: 10px; background-color:white"><u>API GUI \/</u></div></a>
    <div>
        <div style="font-size:30px"><u>authHero:</u></div><br>
        This is a user account managment RESTful API, designed to make it easier for developers to quickly 
        put together a service and not worry about authentication, user managment, logging or statistics generation.
        <br><br>
        Basic usage of this API is, you create an admin account, use that admin account to create a "project",
        you then sign users up using that project's endpoint.
        <br><br>
        user account names must be unique to the project, project names are unique.
        <br><br>
        The basic idea is this service generates an auth token on login, which you use in lue of sending/storing plaintext passwords.<br>
        Auth tokens are checked against on every action to ensure the action is permitted<br>
        You do this by sending a request to authHero on the '/useauth' endpoint, and it tells you if that token is valid.<br>
        You must accociate the account with the token on your end.
        <br><br><hr><br>
        <u>Admin Endpoints:</u><br>
        <br>
        login - /login<br>
        <i>JSON - {username:username, password:password}</i><br><br>
        registration - /registration<br>
        <i>JSON - {username:username, password:password, tags:'optional'}</i><br><br>
        create project - /createproject<br>
        <i>JSON - {projectname:'projectname', auth:'auth-token', tags:'optional'}</i><br><br>
        <br>
        check your projects - /myprojects<br>
        <i>JSON - {auth:'auth-token'}</i><br><br>
        check users of your project - /myusers<br>
        <i>JSON - {auth:'auth-token', UUID:'UUID of project'}</i><br><br>
        <br><br>
        <u>User Endpoints:</u><br>
        <br>
        login - /[projectname]/login<br>
        <i>JSON - {username:username, password:password}</i><br><br>
        register - /[projectname]/register<br>
        <i>JSON - {username:username, password:password, tags:'optional'}</i><br><br>
        <br>
        <br>
        <u>General Endpoints:</u><br>
        <br>
        use auth-token - /useauth<br>
        <i>JSON - {auth:'auth-token'}</i><br><br><br><br>
    </div>
    <hr>
    <div id="gui" style="font-size:30px; margin: 30px 0px 30px 0px;">Basic Interface for API</div>
    <hr>
    <p><u>Auth Token Checker:</u></p>
    <input id="adminToken" type="text" name="token">
    <br><br>
    <button id="adminChecktoken">Check Auth</button>
    <br><br>
</div>

<div>
    <hr>
    <p><u>Admin Login/Registration:</u></p>
    <p>Username:</p>
    <input id="adminUsername" type="text" name="name" value="User">
    <p>Password:</p>
    <input id="adminPassword" type="text" value="Password">
    </br><br>
    <button id="adminLogin">Login</button>
    <button id="adminRegister">Register</button>
</div>
<br>
<hr>


<script>
    var domain = '{{{ url }}}'
    console.log('{{{ url }}}')

    $('#adminLogin').on('click', function(){ 
        var url = domain + 'api/login';
        var data = {
            username: $('#adminUsername').val(),
            password: $('#adminPassword').val(),
        };
        request(data, url);        
    });

     $('#adminRegister').on('click', function(){ 
        var url = domain + 'api/register';
        var data = {
            username: $('#adminUsername').val(),
            password: $('#adminPassword').val(),
            tags: ""
        };
        request(data, url);        
    });
    $('#adminChecktoken').on('click', function(){ 
        var url = domain + 'api/useauth';
        var data = {
            auth: $('#adminToken').val()
        };
        request(data, url);        
    });
</script>

<!--------------------------------->
<!----- Admin Create Project ------>

<div>
    <p><u>Admin Create Project:</u></p>
    <p>Project Name:</p>
    <input id="projectName" type="text" name="name" value="ProjectName">
    </br>
    <p>Auth Token:</p>
    <input id="projectAdminToken" type="text" name="token">
    <br><br>
    <button id="projectCreate">Create Project</button>
    <br><br>
    <hr>
</div>  


<script>
    var domain = '{{{ url }}}'
    console.log('{{{ url }}}')

    $('#projectCreate').on('click', function(){ 
        var url = domain + 'api/createproject';
        var data = {
            projectname: $('#projectName').val(),
            auth: $('#projectAdminToken').val()
        };
        request(data, url);        
    });
</script>

<!--------------------------------->
<!-- User Registration / Login ---->

<div>
    <p><u>User Login/Registration:</u></p>
    <p>Project Name:</p>
    <input id="userProjectname" type="text" name="name" value="ProjectName">
    <p>Username:</p>
    <input id="userUsername" type="text" name="name" value="User">
    <p>Password:</p>
    <input id="userPassword" type="text" value="Password">
    </br><br>
    <button id="userLogin">Login</button>
    <button id="userRegister">Register</button>
</div>
<br>
<hr>


<script>
    var domain = '{{{ url }}}'
    console.log('{{{ url }}}')
    

    $('#userLogin').on('click', function(){ 
        var projectname = $('#userProjectname').val()
        var url = domain + 'api/' + projectname + '/login';
        var data = {
            username: $('#userUsername').val(),
            password: $('#userPassword').val(),
        };
        request(data, url);        
    });

     $('#userRegister').on('click', function(){ 
        var projectname = $('#userProjectname').val()
        var url = domain + 'api/' + projectname + '/register';
        var data = {
            username: $('#userUsername').val(),
            password: $('#userPassword').val(),
            tags: ""
        };
        request(data, url);        
    });
</script>

<!--------------------------------->
<!-- My Projects ---->

<div>
    <p><u>Admin MyProjects:</u></p>
    <p>Authtoken:</p>
    <input id="myProjectAuth" type="text" value="">
    </br><br>
    <button id="findMyProjects">Find Projects</button>
</div>
<br>
<hr>


<script>
    var domain = '{{{ url }}}'
    console.log('{{{ url }}}')
    

    $('#findMyProjects').on('click', function(){ 
        var projectname = $('#myProjectAuth').val()
        var url = domain + 'api/myprojects';
        var data = {
            auth: $('#myProjectAuth').val()
        };
        request(data, url);        
    });

</script>

<!--------------------------------->
<!-- My Userd ---->

<div>
    <p><u>Admin My Users:</u></p>
    <p>Project UUID:</p>
    <input id="myUsersUUID" type="text" value="">
    <p>Authtoken:</p>
    <input id="myUsersAuth" type="text" value="">
    </br><br>
    <button id="findMyUsers">Find Projects</button>
</div>
<br>
<hr>


<script>
    var domain = '{{{ url }}}'
    console.log('{{{ url }}}')
    

    $('#findMyUsers').on('click', function(){ 
        var url = domain + 'api/myusers';
        var data = {
            UUID: $('#myUsersUUID').val(),
            auth: $('#myUsersAuth').val()
        };
        request(data, url);        
    });

</script>


<script>    
    function request(data, url){
        $.ajax({		
            type: 'POST',
            url: url,        
            crossDomain: true,
            data: JSON.stringify(data),
            dataType: 'json',
            contentType: "application/json",
            success: function() {console.log(data);},
            error: function(data) {console.log(data);}        
        });
    
    }
</script>